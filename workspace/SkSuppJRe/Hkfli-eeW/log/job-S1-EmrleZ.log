开始时间：Wed May 10 2017 15:37:13 GMT+0800 (CST)
[Start Job]
[Start Stage] 初始化 
[Start Task] init  初始化任务
开始创建临时工作目录...
创建成功
===============环境变量=======================
PROJECT_ID(项目id) : Hkfli-eeW
JOB_ID(作业id) : S1-EmrleZ
REPOSITORY_NAME(关联仓库名) : test-ci
REPOSITORY_URL(关联仓库url) : git@git.coding.net:luckyjing/test-ci.git
BRANCH(代码执行分支) : feature/docker
REGISTRY(Docker镜像仓库地址) : sujing.xin:5000
==================================================
[Finish Task] init
[Start Task] clone  Git 仓库克隆
> git clone --branch feature/docker git@git.coding.net:luckyjing/test-ci.git test-ci
Cloning into 'test-ci'...

[Finish Task] clone
[Finish Stage] 初始化 
[Start Stage] 测试 
[Start Task] test1  执行Shell命令
> echo 测试开始
测试开始

[Finish Task] test1
[Start Task] test  基于Docker镜像测试
当前工作目录：/Users/sujingxin/coding/daily/pure-ci/workspace/SkSuppJRe/Hkfli-eeW/tmp/test-ci
> docker build -t test/test-ci -f Dockerfile.test .
WARNING: Error loading config file:/Users/sujingxin/.docker/config.json - open /Users/sujingxin/.docker/config.json: permission denied

Sending build context to Docker daemon 342.5 kB

Step 1/7 : FROM node:7

 ---> 90223b3d894e
Step 2/7 : COPY ./package.json /app/package.json

 ---> Using cache
 ---> 00ef5c22dff3
Step 3/7 : WORKDIR /app

 ---> Using cache

 ---> 9d313168d976
Step 4/7 : RUN npm install -q  --registry=https://registry.npm.taobao.org
 ---> Using cache
 ---> 7fbb8a4691ab
Step 5/7 : COPY . /app

 ---> bd74c0d48649

Removing intermediate container f6278803be3b
Step 6/7 : EXPOSE 3000

 ---> Running in 9271bde752b9

 ---> 455a0938fde8

Removing intermediate container 9271bde752b9
Step 7/7 : CMD npm test

 ---> Running in 0cf14ba55b66

 ---> bf9b1efadb92

Removing intermediate container 0cf14ba55b66

Successfully built bf9b1efadb92

> docker rmi test/test-ci
WARNING: Error loading config file:/Users/sujingxin/.docker/config.json - open /Users/sujingxin/.docker/config.json: permission denied

Untagged: test/test-ci:latest
Deleted: sha256:bf9b1efadb9271fb3dc8e73443e4029d8ba8083c0b998d7900197dc1c5f84fcc
Deleted: sha256:455a0938fde8e18c09d66c0bfd31a6a489498766a6e41abf62f324cac83989e9
Deleted: sha256:bd74c0d4864938d220ccd6d47bb0e08136e9da7bb023ad8d4fd8c060feff39fe
Deleted: sha256:85c2a8c89e29f6f07ab7ea19509938e7ab7c5f965c799f948902e648a054c593

[Finish Task] test
[Finish Stage] 测试 
[Start Stage] 构建 
[Start Task] shell1  执行Shell命令
> echo 你好，构建阶段
你好，构建阶段

[Finish Task] shell1
[Start Task] buildImage  构建运行型Docker镜像
镜像名：sujing.xin:5000/hkflieew/test-ci
当前工作目录：/Users/sujingxin/coding/daily/pure-ci/workspace/SkSuppJRe/Hkfli-eeW/tmp/test-ci
> docker build -t sujing.xin:5000/hkflieew/test-ci .
WARNING: Error loading config file:/Users/sujingxin/.docker/config.json - open /Users/sujingxin/.docker/config.json: permission denied

Sending build context to Docker daemon 342.5 kB

Step 1/7 : FROM node:7

 ---> 90223b3d894e
Step 2/7 : COPY ./package.json /app/package.json

 ---> Using cache
 ---> 00ef5c22dff3

Step 3/7 : WORKDIR /app

 ---> Using cache

 ---> 9d313168d976
Step 4/7 : RUN npm install -q  --registry=https://registry.npm.taobao.org

 ---> Using cache
 ---> 7fbb8a4691ab

Step 5/7 : COPY . /app

 ---> 0b118582583d

Removing intermediate container 7bde19e98815
Step 6/7 : EXPOSE 3000

 ---> Running in de5ebcf6e490

 ---> 7ce0defa47a4

Removing intermediate container de5ebcf6e490

Step 7/7 : CMD npm start

 ---> Running in 2b0de0ff8b99

 ---> 6c24aa44facd

Removing intermediate container 2b0de0ff8b99

Successfully built 6c24aa44facd

[Finish Task] buildImage
[Finish Stage] 构建 
[Start Stage] 部署 
[Start Task] shell2  执行Shell命令
> echo 你好，部署阶段
你好，部署阶段

[Finish Task] shell2
[Finish Stage] 部署 
[Success Job]
作业结束，耗时：7022 ms
[Start Task] clean  收尾任务
开始清除临时工作目录...
清除完成
[Finish Task] clean
